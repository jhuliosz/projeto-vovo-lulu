<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Mini Pasteizinhos da Vovó Lulu | Delivery de Salgados Artesanais</title>
<script src="/services/getData.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;family=Nunito:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #FCEBD5;
        }

        .title-font {
            font-family: 'Nunito', sans-serif;
        }

        .cart-open {
            transform: translateX(0);
        }

        .cart-closed {
            transform: translateX(100%);
        }

        .floating-btn {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
    /* Botões flutuantes atrás do carrinho apenas quando ele estiver aberto (mobile e desktop) */
#cart-sidebar.cart-open ~ .fixed.right-6 {
  z-index: 40 !important;   /* abaixo do carrinho (z-50) */
  pointer-events: none;      /* evita clique por baixo do carrinho */
}

    </style>
</head>
<body class="text-[#5C4033]">
<header class="bg-[#FCEBD5] text-[#5C4033] shadow-md py-4 px-4 md:px-8">
<!-- Header MOBILE -->
<div class="flex items-center justify-between md:hidden relative">
<!-- Menu hambúrguer à esquerda -->
<button id="menu-btn" title="menu-hmb">
<i class="fas fa-bars text-2xl"></i>
</button>
<!-- Logo centralizado -->
<div class="absolute left-1/2 transform -translate-x-1/2">
<img alt="Logo" class="h-16" src="IMG/Logo2.png"/>
</div>
<!-- Carrinho à direita -->
<button class="relative cart-btn">
<img alt="Carrinho" class="w-9 h-9 object-contain" loading="lazy" src="IMG/CarrinhoDesktop.png"/>
<span class="absolute -top-2 -right-2 bg-[#E63946] text-white rounded-full w-5 h-5 flex items-center justify-center text-xs" id="cart-count">0</span>
</button>
</div>
<!-- Header DESKTOP -->
<div class="hidden md:flex justify-between items-center max-w-7xl mx-auto relative">
<!-- Logo à esquerda -->
<div class="flex items-center space-x-4">
<img alt="Logo" class="h-24 md:h-32" src="IMG/Logo2.png"/>
</div>
<!-- Menu central -->
<nav class="absolute inset-y-0 left-1/2 -translate-x-1/2 flex items-center space-x-8 text-lg font-medium">
<a class="hover:text-[#E63946] transition" href="index.html">Início</a>
<a class="hover:text-[#E63946] transition" href="AboutUs.html">Sobre Nós</a>
</nav>
<!-- Carrinho à direita -->
<div>
<button class="relative cart-btn">
<img alt="Carrinho" class="w-20 h-20 object-contain" loading="lazy" src="IMG/CarrinhoDesktop.png"/>
<span class="absolute -top-2 -right-2 bg-[#E63946] text-white rounded-full w-5 h-5 flex items-center justify-center text-xs" id="cart-count">0</span>
</button>
</div>
</div>
</header>
<!-- Menu lateral mobile -->

<!-- Main Content -->
<main class="container mx-auto px-4 py-8 pb-24 max-w-4xl">
    <h1 class="title-font text-3xl md:text-4xl font-bold mb-6 text-center">Sobre a Mini Pasteizinhos da Vovó Lulu</h1>

    <section class="bg-white rounded-2xl shadow-md p-6 md:p-8 mb-8">
      <h2 class="title-font text-2xl font-semibold mb-3">Nossa História</h2>
      <p class="leading-relaxed mb-4">
        Fundada com muito carinho no bairro Jardim Seckler, a <strong>Mini Pasteizinhos da Vovó Lulu</strong> nasceu da vontade de levar
        sabor e praticidade para a sua rotina. Começamos atendendo pedidos de vizinhos e amigos e, com o tempo,
        passamos a oferecer nossos salgados artesanais por delivery, mantendo o cuidado com cada detalhe — do preparo
        à entrega.
      </p>
      <p class="leading-relaxed">
        Hoje, seguimos com a mesma essência: receitas tradicionais, ingredientes selecionados e um atendimento próximo,
        para que cada pedacinho chegue quentinho e com gostinho de feito em casa.
      </p>
    </section>

    <section class="grid md:grid-cols-3 gap-4">
      <div class="bg-white rounded-2xl shadow-md p-6">
        <h3 class="title-font text-xl font-semibold mb-2">Missão</h3>
        <p class="text-sm leading-relaxed">
          Oferecer salgados artesanais de qualidade, com entrega rápida e atendimento acolhedor, tornando momentos
          simples em ocasiões especiais.
        </p>
      </div>
      <div class="bg-white rounded-2xl shadow-md p-6">
        <h3 class="title-font text-xl font-semibold mb-2">Visão</h3>
        <p class="text-sm leading-relaxed">
          Ser referência regional em delivery de mini salgados, mantendo a essência caseira e ampliando nossa presença
          de forma sustentável.
        </p>
      </div>
      <div class="bg-white rounded-2xl shadow-md p-6">
        <h3 class="title-font text-xl font-semibold mb-2">Valores</h3>
        <ul class="text-sm list-disc pl-5 space-y-1">
          <li>Qualidade e cuidado no preparo</li>
          <li>Respeito ao cliente e à comunidade</li>
          <li>transparência e responsabilidade</li>
          <li>Tradição com toque de inovação</li>
        </ul>
      </div>
    </section>
  </main>
<!-- Shopping Cart Sidebar -->
<div class="fixed top-0 right-0 w-full md:w-96 h-full bg-white shadow-2xl z-50 transition-transform duration-300 ease-in-out cart-closed overflow-y-auto" id="cart-sidebar">
<div class="p-6 pb-28 md:pb-6">
<div class="flex justify-between items-center mb-6">
<h2 class="title-font text-2xl font-bold">Seu Carrinho</h2>
<button class="text-gray-500 hover:text-gray-700" id="close-cart" title="close-carrinhomenu">
<i class="fas fa-times text-2xl"></i>
</button>
</div>
<div class="mb-6" id="cart-items">
<!-- Cart items will be added here dynamically -->
<div class="text-center py-10">
<img alt="Carrinho" class="w-20 h-20 object-contain" loading="lazy" src="IMG/CarrinhoDesktop.png"/>
<p class="text-gray-500">Seu carrinho está vazio</p>
</div>
</div>
<div class="border-t pt-4">
<div class="flex justify-between mb-2">
<span>Subtotal:</span>
<span id="subtotal">R$ 0,00</span>
</div>
<div class="flex justify-between mb-2">
<span>Taxa de Entrega:</span>
<span id="delivery-fee">R$ 5,00</span>
</div>
<div class="flex justify-between font-bold text-lg">
<span>Total:</span>
<span id="total">R$ 5,00</span>
</div>
<!-- Botão LIMPAR com espaçamento acima -->
<button class="w-full bg-red-500 text-white py-3 rounded-full font-bold mt-2 hover:bg-red-600 transition" id="clear-cart-btn">
                    Limpar Carrinho
                </button>
<!-- Botão FINALIZAR com espaçamento abaixo -->
<button class="w-full bg-[#3C6E47] text-white py-3 rounded-full font-bold mt-4 hover:bg-[#2d5536] transition" id="checkout-btn">
                    Finalizar Pedido
                </button>
</div>
</div>
</div>
<!-- Checkout Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden" id="checkout-modal">
<div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
<div class="flex justify-between items-center mb-4">
<h2 class="title-font text-2xl font-bold">Finalizar Pedido</h2>
<button class="text-gray-500 hover:text-gray-700" id="close-checkout" title="close-fp">
<i class="fas fa-times text-2xl"></i>
</button>
</div>
<form id="checkout-form">
<div class="mb-4">
<label class="block mb-1 font-medium" for="name">Nome Completo</label>
<input class="w-full p-2 border rounded" id="name" required="" type="text"/>
</div>
<div class="mb-4">
<label class="block mb-1 font-medium" for="phone">Telefone</label>
<input class="w-full p-2 border rounded" id="phone" required="" type="tel"/>
</div>
<div class="mb-4">
<label class="block mb-1 font-medium" for="address">Endereço</label>
<textarea class="w-full p-2 border rounded" id="address" required="" rows="3"></textarea>
</div>
<div class="mb-6">
<label class="block mb-2 font-medium">Método de Pagamento</label>
<div class="space-y-2">
<label class="flex items-center">
<input checked="" class="mr-2" name="payment" type="radio" value="Dinheiro"/>
<span>Dinheiro</span>
</label>
<label class="flex items-center">
<input class="mr-2" name="payment" type="radio" value="PIX"/>
<span>PIX</span>
</label>
<label class="flex items-center">
<input class="mr-2" name="payment" type="radio" value="Cartão"/>
<span>Cartão</span>
</label>
</div>
</div>
<button class="w-full bg-[#3C6E47] text-white py-3 rounded-full font-bold hover:bg-[#2d5536] transition" type="submit">
                    Confirmar Pedido
                </button>
</form>
</div>
</div>
<!-- Order Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden" id="confirmation-modal">
<div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
<div class="text-center">
<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="fas fa-check text-green-500 text-2xl"></i>
</div>
<h2 class="title-font text-2xl font-bold mb-2">Pedido Confirmado!</h2>
<p class="mb-4">Obrigado por seu pedido na Vovó Lulu!</p>
<div class="text-left mb-6 p-4 bg-gray-50 rounded" id="order-details">
<!-- Order details will be added here -->
</div>
<p class="mb-4">Seu pedido será preparado com carinho e entregue em breve.</p>
<a class="inline-block bg-green-500 text-white px-6 py-2 rounded-full font-bold hover:bg-green-600 transition mb-3" href="https://wa.me/5511953717180" id="whatsapp-btn" rel="noopener" target="_blank">
<i class="fab fa-whatsapp mr-2"></i> Enviar via WhatsApp
                </a>
<button class="block w-full text-[#5C4033] font-medium mt-4" id="close-confirmation">
                    Fechar
                </button>
</div>
</div>
</div>
<!-- Floating Buttons -->
<div class="fixed z-50 right-6 flex flex-col items-end space-y-3" style="bottom: 90px;">
<a class="floating-btn w-14 h-14 bg-green-500 text-white rounded-full flex items-center justify-center text-2xl hover:bg-green-600 transition" href="https://wa.me/5511953717180" rel="noopener" style="position: fixed; bottom: 90px; right: 24px;" target="_blank">
<i class="fab fa-whatsapp"></i>
</a>
<a class="floating-btn w-14 h-14 bg-[#E63946] text-white rounded-full flex items-center justify-center text-2xl hover:bg-red-600 transition" href="https://www.ifood.com.br/delivery/sao-paulo-sp/mini-pasteizinhos-da-vovo-lulu-jardim-seckler/d34fe3e6-c0b7-4375-b863-b5e6a7360779" rel="noopener" style="position: fixed; bottom: 150px; right: 24px;" target="_blank">
<img src="./IMG/ifoodicon.webp" title="ifoodicon"/>
</a>
</div>
<!-- Overlay -->
<div class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden" id="overlay"></div>
<script src="cart.js"></script>
<script>
        // Mobile Menu Toggle
        //Cart.updateCart();
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Cart Functionality
        // Cart Functionality
        const cartBtns = document.querySelectorAll('.cart-btn'); // pega todos os botões com classe 'cart-btn'
        const closeCartBtn = document.getElementById('close-cart');
        const cartSidebar = document.getElementById('cart-sidebar');
        const overlay = document.getElementById('overlay');
        const cartCounts = document.querySelectorAll('#cart-count, .cart-count');
        const checkoutBtn = document.getElementById('checkout-btn');
        const closeCheckoutBtn = document.getElementById('close-checkout');
        const checkoutModal = document.getElementById('checkout-modal');
        const closeConfirmationBtn = document.getElementById('close-confirmation');
        const confirmationModal = document.getElementById('confirmation-modal');
        const checkoutForm = document.getElementById('checkout-form');
        const orderDetails = document.getElementById('order-details');
        const whatsappBtn = document.getElementById('whatsapp-btn');
        const clearCartBtn = document.getElementById('clear-cart-btn');
        


        let cart = [];
        let subtotal = 0;
        const deliveryFee = 5;

        // Toggle Cart
        function toggleCart() {
            cartSidebar.classList.toggle('cart-closed');
            cartSidebar.classList.toggle('cart-open');
            overlay.classList.toggle('hidden');
            document.body.classList.toggle('overflow-hidden');
        }

        // ✅ CORRETO: aplica evento a todos os botões do carrinho
        cartBtns.forEach(btn => {
            btn.addEventListener('click', Cart.toggleCart);
        });
        closeCartBtn.addEventListener('click', Cart.toggleCart);
        overlay.addEventListener('click', Cart.toggleCart);


        // Add to Cart
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', function () {
                var productCard = this.closest('.product-card');
                var productName = productCard.querySelector('h3').textContent;
                var productPrice = parseFloat(productCard.querySelector('span').textContent.replace('R$ ', '').replace(',', '.'));

                let quantity = 1;

                // Check if it's a combo
                if (productCard.querySelector('.combo-input')) {
                    const comboInputs = productCard.querySelectorAll('.combo-input');
                    var comboItems = [];

                    comboInputs.forEach(input => {
                        const itemName = input.previousElementSibling.textContent.replace(':', '').trim();
                        const itemQuantity = parseInt(input.value);

                        if (itemQuantity > 0) {
                            comboItems.push(`${itemQuantity} ${itemName}`);
                        }
                    });

                    if (comboItems.length > 0) {
                        productName = `Combo Variado (${comboItems.join(', ')})`;
                    } else {
                        alert('Selecione pelo menos um item para o combo!');
                        return;
                    }
                } else {
                    quantity = parseInt(productCard.querySelector('.quantity').textContent);
                }

                const product = {
                    name: productName,
                    price: productPrice,
                    quantity: quantity
                };

                Cart.addItem(product);

            });
        });
        document.getElementById('comboFamilia').addEventListener('click', ()=>{
            Cart.addItem({
                name: "Combo Familia",
                price: 59.90,
                quantity: 1
            });

        });
        
        // Quantity Buttons
        document.querySelectorAll('.quantity-btn').forEach(button => {
            button.addEventListener('click', function () {
                const quantityElement = this.parentElement.querySelector('.quantity');
                let quantity = parseInt(quantityElement.textContent);

                if (this.classList.contains('minus') && quantity > 1) {
                    quantity--;
                } else if (this.classList.contains('plus')) {
                    quantity++;
                }

                quantityElement.textContent = quantity;
            });
        });

        // Update Cart
        function updateCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            subtotal = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="text-center py-10">
                        <img src="IMG/CarrinhoDesktop.png" alt="Carrinho" class="w-20 h-20 object-contain" loading="lazy">
                        <p class="text-gray-500">Seu carrinho está vazio</p>
                    </div>
                `;
                cartCounts.forEach(span => span.textContent = '0');
            } else {
                cartItemsContainer.innerHTML = '';
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;

                    const cartItem = document.createElement('div');
                    cartItem.className = 'flex justify-between items-center py-3 border-b';
                    cartItem.innerHTML = `
                        <div class="flex-1">
                            <h4 class="font-medium">${item.name}</h4>
                            <div class="flex items-center mt-1">
                                <button class="edit-quantity mr-2 text-xs text-gray-500 hover:text-[#5C4033]" data-index="${index}">
                                    <i class="fas fa-edit mr-1"></i>Editar
                                </button>
                                <button class="remove-item text-xs text-red-500 hover:text-red-700" data-index="${index}">
                                    <i class="fas fa-trash-alt mr-1"></i>Remover
                                </button>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-medium">R$ ${item.price.toFixed(2).replace('.', ',')}</div>
                            <div class="text-sm">x${item.quantity}</div>
                            <div class="font-bold">R$ ${itemTotal.toFixed(2).replace('.', ',')}</div>
                        </div>
                    `;
                    cartItemsContainer.appendChild(cartItem);
                });

                cartCounts.forEach(span => span.textContent = cart.reduce((total, item) => total + item.quantity, 0));

                // Add event listeners to new buttons
                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = parseInt(this.getAttribute('data-index'));
                        cart.splice(index, 1);
                        updateCart();
                    });
                });

                document.querySelectorAll('.edit-quantity').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = parseInt(this.getAttribute('data-index'));
                        const item = cart[index];
                        const newQuantity = prompt(`Quantidade de ${item.name}:`, item.quantity);

                        if (newQuantity !== null && !isNaN(newQuantity) && parseInt(newQuantity) > 0) {
                            item.quantity = parseInt(newQuantity);
                            updateCart();
                        }
                    });
                });
            }

            document.getElementById('subtotal').textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
            document.getElementById('total').textContent = `R$ ${(subtotal + deliveryFee).toFixed(2).replace('.', ',')}`;
        }

        // Checkout
        checkoutBtn.addEventListener('click', () => {
            

            Cart.toggleCart();
            checkoutModal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        });

        closeCheckoutBtn.addEventListener('click', () => {
            checkoutModal.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        });

        // Form Submission
        checkoutForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const payment = document.querySelector('input[name="payment"]:checked').value;

            // Generate order summary
            let orderSummary = `
                <p><strong>Cliente:</strong> ${name}</p>
                <p><strong>Telefone:</strong> ${phone}</p>
                <p><strong>Endereço:</strong> ${address}</p>
                <p><strong>Pagamento:</strong> ${payment}</p>
                <hr class="my-2">
                <p class="font-bold mb-1">Itens do Pedido:</p>
                <ul class="list-disc pl-5 mb-2">
            `;

            cart.forEach(item => {
                orderSummary += `<li>${item.quantity}x ${item.name} - R$ ${(item.price * item.quantity).toFixed(2).replace('.', ',')}</li>`;
            });

            orderSummary += `
                </ul>
                <hr class="my-2">
                <p><strong>Subtotal:</strong> R$ ${subtotal.toFixed(2).replace('.', ',')}</p>
                <p><strong>Taxa de Entrega:</strong> R$ ${deliveryFee.toFixed(2).replace('.', ',')}</p>
                <p class="font-bold"><strong>Total:</strong> R$ ${(subtotal + deliveryFee).toFixed(2).replace('.', ',')}</p>
            `;

            orderDetails.innerHTML = orderSummary;

            // Generate WhatsApp message
            let whatsappMessage = `Olá Vovó Lulu! Gostaria de fazer um pedido:\n\n`;
            whatsappMessage += `*Nome:* ${name}\n`;
            whatsappMessage += `*Telefone:* ${phone}\n`;
            whatsappMessage += `*Endereço:* ${address}\n`;
            whatsappMessage += `*Forma de Pagamento:* ${payment}\n\n`;
            whatsappMessage += `*Itens do Pedido:*\n`;

            cart.forEach(item => {
                whatsappMessage += `- ${item.quantity}x ${item.name} - R$ ${(item.price * item.quantity).toFixed(2).replace('.', ',')}\n`;
            });

            whatsappMessage += `\n*Subtotal:* R$ ${subtotal.toFixed(2).replace('.', ',')}\n`;
            whatsappMessage += `*Taxa de Entrega:* R$ ${deliveryFee.toFixed(2).replace('.', ',')}\n`;
            whatsappMessage += `*Total:* R$ ${(subtotal + deliveryFee).toFixed(2).replace('.', ',')}\n\n`;
            whatsappMessage += `Por favor, confirmem meu pedido! Obrigado!`;

            whatsappBtn.href = `https://wa.me/5511953717180?text=${encodeURIComponent(whatsappMessage)}`;

            checkoutModal.classList.add('hidden');
            confirmationModal.classList.remove('hidden');
        });

        closeConfirmationBtn.addEventListener('click', () => {
            confirmationModal.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');

            // Clear cart after order is confirmed
            cart = [];
            updateCart();

            // Reset form
            checkoutForm.reset();
        });
    </script>
<div class="fixed bottom-0 left-0 w-full bg-[#5C4033] text-[#FCEBD5] flex justify-around items-center py-2 shadow-inner md:hidden z-50">
<a class="flex flex-col items-center text-xs hover:text-[#F4A261]" href="#todos">
<img alt="Inicio" class="w-7 h-7 object-contain" loading="lazy" src="IMG/Inicio.png"/>
            Início
        </a>
<a class="flex flex-col items-center text-xs hover:text-[#F4A261]" href="#assados">
<img alt="Assados" class="w-7 h-7 object-contain" loading="lazy" src="IMG/Assados.png"/>
            Assados
        </a>
<a class="flex flex-col items-center text-xs hover:text-[#F4A261]" href="#fritos">
<img alt="Fritos" class="w-7 h-7 object-contain" loading="lazy" src="IMG/Fritos.png"/>
            Fritos
        </a>
<a class="flex flex-col items-center text-xs hover:text-[#F4A261]" href="#bebidas">
<img alt="Bebidas" class="w-7 h-7 object-contain" loading="lazy" src="IMG/Bebidas.png"/>
            Bebidas
        </a>
<a class="flex flex-col items-center text-xs hover:text-[#F4A261]" href="#combos">
<img alt="Combos" class="w-7 h-7 object-contain" loading="lazy" src="IMG/Combos.png"/>
            Combos
        </a>
<a class="flex flex-col items-center text-xs hover:text-[#F4A261] cart-btn" href="#" id="mobile-cart-btn">
<span class="relative inline-block">
<img alt="Carrinho" class="w-7 h-7 object-contain" loading="lazy" src="IMG/Carrinho.png"/>
<span class="absolute -top-2 -right-3 bg-[#E63946] text-white rounded-full w-5 h-5 flex items-center justify-center text-xs cart-count">0</span>
</span>
            Carrinho
        </a>
</div>

<script>
// Fecha o carrinho quando o usuário navega pelos botões da barra mobile
document.addEventListener('DOMContentLoaded', function(){
  function closeCartIfOpen(){
    if (window.Cart && typeof Cart.close === 'function') {
      Cart.close();
    } else {
      // fallback: esconde overlay e sidebar, caso o objeto Cart não esteja disponível
      var overlay = document.getElementById('overlay');
      var sidebar = document.getElementById('cart-sidebar');
      if (overlay) overlay.classList.add('hidden');
      if (sidebar) {
        sidebar.classList.remove('cart-open');
        sidebar.classList.add('cart-closed');
      }
      document.body.classList.remove('overflow-hidden');
    }
  }

  // Clique em qualquer link da barra mobile (exceto o Carrinho)
  document.addEventListener('click', function(e){
    var link = e.target.closest('a');
    if (!link) return;

    // Está dentro da barra inferior (md:hidden + fixed bottom-0)?
    var bar = link.closest('div');
    var isMobileBar = false;
    if (bar && bar.classList) {
      isMobileBar = bar.classList.contains('md:hidden') && bar.classList.contains('fixed') && bar.classList.contains('bottom-0');
    }
    if (!isMobileBar) return;

    // Ignora o próprio botão do carrinho
    if (link.id === 'mobile-cart-btn' || link.classList.contains('cart-btn')) return;

    // Em mobile, fechar o carrinho antes de aplicar o filtro
    if (window.matchMedia('(max-width: 767.98px)').matches) {
      closeCartIfOpen();
    }
  }, true);

  // Failsafe: ao trocar o hash (ex.: via deep-link manual), fecha no mobile
  window.addEventListener('hashchange', function(){
    if (window.matchMedia('(max-width: 767.98px)').matches) {
      closeCartIfOpen();
    }
  });
});
</script>

<!-- Mobile Menu (drawer like cart; does not cover bottom bar) -->
<div class="md:hidden" id="mobile-menu-root">
<div class="fixed inset-x-0 top-0 bottom-16 bg-black bg-opacity-50 hidden z-[70]" data-overlay="menu" id="menu-overlay"></div>
<aside class="fixed top-0 left-0 bottom-16 w-72 max-w-[80%] bg-white shadow-xl transform -translate-x-full transition-transform duration-300 ease-in-out z-[71] rounded-r-2xl overflow-y-auto" id="mobile-menu-panel">
<div class="p-6">
<div class="flex items-center justify-between mb-6">
<h2 class="title-font text-2xl font-bold text-[#5C4033]">Menu</h2>
<button aria-label="Fechar menu" class="text-gray-500 hover:text-gray-700" id="close-menu">
<i class="fas fa-times text-2xl"></i>
</button>
</div>
<nav class="flex flex-col gap-3 text-lg">
<a class="px-3 py-2 rounded-lg hover:bg-[#FCEBD5] text-[#5C4033]" href="index.html">Início</a>
<a class="px-3 py-2 rounded-lg hover:bg-[#FCEBD5] text-[#5C4033]" href="AboutUs.html">Sobre Nós</a>
</nav>
</div>
</aside>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
  const menuBtn = document.getElementById('menu-btn');
  const menuOverlay = document.getElementById('menu-overlay');
  const menuPanel = document.getElementById('mobile-menu-panel');
  const closeMenuBtn = document.getElementById('close-menu');

  function isMobile(){ return window.matchMedia('(max-width: 767.98px)').matches; }

  function closeCartIfOpen(){
    if (window.Cart && typeof Cart.close === 'function') {
      Cart.close();
    } else {
      var overlay = document.getElementById('overlay');
      var sidebar = document.getElementById('cart-sidebar');
      if (overlay) overlay.classList.add('hidden');
      if (sidebar) {
        sidebar.classList.remove('cart-open');
        sidebar.classList.add('cart-closed');
      }
      document.body.classList.remove('overflow-hidden');
    }
  }

  function openMenu(){
    if (!isMobile()) return;
    closeCartIfOpen();
    if (menuOverlay) menuOverlay.classList.remove('hidden');
    if (menuPanel) menuPanel.classList.remove('-translate-x-full');
    document.body.classList.add('overflow-hidden');
  }

  function closeMenu(){
    if (menuOverlay) menuOverlay.classList.add('hidden');
    if (menuPanel) menuPanel.classList.add('-translate-x-full');
    document.body.classList.remove('overflow-hidden');
  }

  if (menuBtn) menuBtn.addEventListener('click', function(e){ e.preventDefault(); openMenu(); });

  if (menuOverlay) menuOverlay.addEventListener('click', closeMenu);
  if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMenu);
  document.querySelectorAll('#mobile-menu-panel a').forEach(function(a){ a.addEventListener('click', closeMenu); });
  document.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeMenu(); });
  window.addEventListener('hashchange', function(){ if (isMobile()) closeMenu(); });
});
</script>
</body>
</html>